<app-datatable
    [columns]="metadataRegistryColumns"
    [data]="metadataRegistries"
    [actions]="metadataRegistryActions"
    [headerConfig]="headerConfig"
    (btnClickTrigger)="openAddMetadataRegistryModal()"
    [reorderable]="true"
    (rowOrderChange)="onRowOrderChange($event)"
    [config]="{
        pageSize: 10,
        showSearch: true,
        showPagination: true
    }">
</app-datatable>

<!-- Add Metadata Registry Modal -->
<app-modal 
    [isOpen]="isAddModalOpen" 
    (close)="closeAddMetadataRegistryModal()"
    [showCloseButton]="true"
    className="max-w-md">
    <div class="p-6">
        <h2 class="mb-4 text-xl font-semibold text-gray-800 dark:text-white/90">
            Add Metadata Registry
        </h2>
        
        <div class="mb-4">
            <label for="metadataTitle" class="block mb-2 text-sm font-medium text-gray-700 dark:text-gray-400">
                Title
            </label>
            <input 
                type="text" 
                id="metadataTitle"
                [(ngModel)]="formTitle"
                placeholder="Enter metadata title"
                class="w-full rounded-lg border border-gray-300 bg-transparent py-2.5 px-4 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800" />
        </div>

        <div class="mb-4">
            <label for="metadataKey" class="block mb-2 text-sm font-medium text-gray-700 dark:text-gray-400">
                Key
            </label>
            <input 
                type="text" 
                id="metadataKey"
                [(ngModel)]="formKey"
                placeholder="Enter metadata key"
                class="w-full rounded-lg border border-gray-300 bg-transparent py-2.5 px-4 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800" />
        </div>
        
        <div class="mb-4">
            <label class="block mb-2 text-sm font-medium text-gray-700 dark:text-gray-400">
                Metadata Group
            </label>
            <app-select
                [options]="metadataGroupOptions"
                [value]="formMetadataGroup"
                (valueChange)="formMetadataGroup = $event"
                placeholder="Select metadata group"
                className="w-full rounded-lg border border-gray-300 bg-transparent py-2.5 px-4 text-sm shadow-theme-xs focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:focus:border-brand-800"
            >
            </app-select>
        </div>

        <div class="mb-4">
            <label for="componentType" class="block mb-2 text-sm font-medium text-gray-700 dark:text-gray-400">
                Component Type
            </label>
            <app-select
                [options]="componentTypeOptions"
                [value]="formComponentType"
                (valueChange)="onComponentTypeChange($event)"
                placeholder="Select component type"
                className="w-full rounded-lg border border-gray-300 bg-transparent py-2.5 px-4 text-sm shadow-theme-xs focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:focus:border-brand-800">
            </app-select>
        </div>

        <div [class.hidden]="showDropdownSelection" class="mb-4">
            <label for="addDropDown" class="block mb-2 text-sm font-medium text-gray-700 dark:text-gray-400">
                Dropdown Items
            </label>
            <app-select
                [options]="dropdowns"
                [value]="formDropdown"
                (valueChange)="onDropdownChange($event)"
                placeholder="Select Drop Down"
                className="w-full rounded-lg border border-gray-300 bg-transparent py-2.5 px-4 text-sm shadow-theme-xs focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:focus:border-brand-800">
            </app-select>
        </div>
        
        <div class="mb-4 flex items-center">
            <input 
                type="checkbox" 
                id="isRequired"
                [(ngModel)]="formIsRequired"
                class="w-4 h-4 text-brand-600 bg-gray-100 border-gray-300 rounded focus:ring-brand-500 dark:focus:ring-brand-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600" />
            <label for="isRequired" class="ml-2 text-sm font-medium text-gray-700 dark:text-gray-400">
                Is Required
            </label>
        </div>
        
        <div class="mb-6 flex items-center">
            <input 
                type="checkbox" 
                id="isMultiple"
                [(ngModel)]="formIsMultiple"
                class="w-4 h-4 text-brand-600 bg-gray-100 border-gray-300 rounded focus:ring-brand-500 dark:focus:ring-brand-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600" />
            <label for="isMultiple" class="ml-2 text-sm font-medium text-gray-700 dark:text-gray-400">
                Is Multiple
            </label>
        </div>
        
        <div class="flex justify-end gap-3">
            <app-button 
                [variant]="'outline'" 
                [size]="'md'"
                (btnClick)="closeAddMetadataRegistryModal()">
                Cancel
            </app-button>
            <app-button 
                [variant]="'primary'" 
                [size]="'md'"
                [disabled]="isAddButtonDisabled()"
                (btnClick)="onAddItem()">
                <i class="fas fa-plus text-lg"></i>
                Add
            </app-button>
        </div>
    </div>
</app-modal>

<!-- Edit Metadata Registry Modal -->
<app-modal 
    [isOpen]="isEditModalOpen" 
    (close)="closeEditMetadataRegistryModal()"
    [showCloseButton]="true"
    className="max-w-md">
    <div class="p-6">
        <h2 class="mb-4 text-xl font-semibold dark:text-white/90">
            Edit Metadata Registry
        </h2>
        
        <div class="mb-4">
            <label for="editMetadataTitle" class="block mb-2 text-sm font-medium text-gray-700 dark:text-gray-400">
                Title
            </label>
            <input 
                type="text" 
                id="editMetadataTitle"
                [(ngModel)]="formTitle"
                placeholder="Enter metadata title"
                class="w-full rounded-lg border border-gray-300 bg-transparent py-2.5 px-4 text-sm shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800" />
        </div>
        
        <div class="mb-4">
            <label for="metadataKey" class="block mb-2 text-sm font-medium text-gray-700 dark:text-gray-400">
                Key
            </label>
            <input 
                type="text" 
                id="metadataKey"
                [(ngModel)]="formKey"
                placeholder="Enter metadata key"
                class="w-full rounded-lg border border-gray-300 bg-transparent py-2.5 px-4 text-sm   shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800" />
        </div>

        <div class="mb-4">
            <label class="block mb-2 text-sm font-medium text-gray-700 dark:text-gray-400">
                Metadata Group
            </label>
            <app-select
                [options]="metadataGroupOptions"
                [value]="formMetadataGroup"
                (valueChange)="formMetadataGroup = $event"
                placeholder="Select metadata group"
                className="w-full rounded-lg border border-gray-300 bg-transparent py-2.5 px-4 text-sm shadow-theme-xs focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:focus:border-brand-800"
            >
            </app-select>
        </div>

        <div class="mb-4">
            <label for="editComponentType" class="block mb-2 text-sm font-medium text-gray-700 dark:text-gray-400">
                Component Type
            </label>
            <app-select
                [options]="componentTypeOptions"
                [value]="formComponentType"
                (valueChange)="onComponentTypeChange($event)"
                placeholder="Select component type"
                className="w-full rounded-lg border border-gray-300 bg-transparent py-2.5 px-4 text-sm shadow-theme-xs focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:focus:border-brand-800">
            </app-select>
        </div>

        <div [class.hidden]="!showDropdownSelection" class="mb-4">
            <label for="editDropDown" class="block mb-2 text-sm font-medium text-gray-700 dark:text-gray-400">
                Dropdown Items
            </label>
            <app-select
                [options]="dropdowns"
                [value]="formDropdown"
                (valueChange)="onDropdownChange($event)"
                placeholder="Select Drop Down"
                className="w-full rounded-lg border border-gray-300 bg-transparent py-2.5 px-4 text-sm shadow-theme-xs focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:focus:border-brand-800">
            </app-select>
        </div>
        
        <div class="mb-4 flex items-center">
            <input 
                type="checkbox" 
                id="editIsRequired"
                [(ngModel)]="formIsRequired"
                class="w-4 h-4 text-brand-600 bg-gray-100 border-gray-300 rounded focus:ring-brand-500 dark:focus:ring-brand-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600" />
            <label for="editIsRequired" class="ml-2 text-sm font-medium text-gray-700 dark:text-gray-400">
                Is Required
            </label>
        </div>
        
        <div class="mb-6 flex items-center">
            <input 
                type="checkbox" 
                id="editIsMultiple"
                [(ngModel)]="formIsMultiple"
                class="w-4 h-4 text-brand-600 bg-gray-100 border-gray-300 rounded focus:ring-brand-500 dark:focus:ring-brand-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600" />
            <label for="editIsMultiple" class="ml-2 text-sm font-medium text-gray-700 dark:text-gray-400">
                Is Multiple
            </label>
        </div>
        
        <div class="flex justify-end gap-3">
            <app-button 
                [variant]="'outline'" 
                [size]="'md'"
                (btnClick)="closeEditMetadataRegistryModal()">
                Cancel
            </app-button>
            <app-button 
                [variant]="'primary'" 
                [size]="'md'"
                [disabled]="isEditButtonDisabled()"
                (btnClick)="onSaveEdit()">
                <i class="fas fa-save text-lg"></i>
                Save
            </app-button>
        </div>
    </div>
</app-modal>

<!-- Delete Confirmation Modal -->
<app-modal 
    [isOpen]="isDeleteModalOpen" 
    (close)="closeDeleteModal()"
    [showCloseButton]="true"
    className="max-w-md">
    <div class="p-6">
        <h2 class="mb-4 text-xl font-semibold text-gray-800 dark:text-white/90">
            Delete Metadata Registry
        </h2>
        
        <p class="mb-6 text-gray-700 dark:text-gray-400">
            Are you sure you want to delete this metadata registry?
            @if (deletingMetadataRegistry) {
                <strong class="block mt-2 text-gray-900 dark:text-white">{{ deletingMetadataRegistry.title }}</strong>
            }
        </p>
        
        <div class="flex justify-end gap-3">
            <app-button 
                [variant]="'outline'" 
                [size]="'md'"
                (btnClick)="closeDeleteModal()">
                Cancel
            </app-button>
            <app-button 
                [variant]="'primary'" 
                [size]="'md'"
                (btnClick)="confirmDelete()"
                class="bg-red-500 hover:bg-red-600">
                <i class="fas fa-trash mr-2"></i>
                Yes, Delete
            </app-button>
        </div>
    </div>
</app-modal>
